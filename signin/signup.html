<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Alta Moda Login Page</title>
    <link rel="website icon" type="png" href="webicon.png">
    <link rel="stylesheet" href="/assets/css/styles3.css">
    <script src="https://kit.fontawesome.com/a2806b961a.js" crossorigin="anonymous"></script>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">
</head>

<body>
    <div class="container" id="container">
        <div id="form-container sign-up">
            <img src="/assets/images/logo3.png" class="logo-right">
            <form id="MainForm">
                <h1>Create Account</h1>
                <div class="social-icons">
                    <a href="#" class="icon">
                        <i class="fa-brands fa-google fa-xl" style="color: #000000;"></i>
                    </a>
                    <a href="#" class="icon">
                        <i class="fa-brands fa-facebook fa-xl" style="color: #000000;"></i>
                    </a>
                </div>
                <span>Or use your Email for registration</span>
                <input type="text" id="nameInp" placeholder="Alex">
                <input type="email" id="emailInp" placeholder="name@example.com">
                <input type="password" id="passwordInp" placeholder="*****">
                <div class="row">
                    <div class="col">
                        <button type="submit" id="signup" class="btn btn-primary">Sign Up</button>
                    </div>
                    <div class="col">
                        <a href="login.html"><button type="button" class="btn btn-primary">Sign In</button></a>
                    </div>
                </div>
            </form>
        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-MrcW6ZMFYlzcLA8Nl+NtUVF0sA7MsXsP1UyJoMp4YLEuNSfAP+JcXn/tWtIaxVXM"
        crossorigin="anonymous"></script>

    <script type="module">
        // Import the functions you need from the SDKs you need
        import { initializeApp } from "https://www.gstatic.com/firebasejs/10.11.1/firebase-app.js";
        import { getDatabase, ref, set } from "https://www.gstatic.com/firebasejs/10.11.1/firebase-database.js";
        import { getAuth, createUserWithEmailAndPassword } from "https://www.gstatic.com/firebasejs/10.11.1/firebase-auth.js";

        const firebaseConfig = {
            apiKey: "AIzaSyBJsoc898mvwniLDvkkUaWNiiP0djkgAZA",
            authDomain: "dbms-d9a79.firebaseapp.com",
            projectId: "dbms-d9a79",
            storageBucket: "dbms-d9a79.appspot.com",
            messagingSenderId: "911190580486",
            appId: "1:911190580486:web:38cc60ce432504f2219287",
            measurementId: "G-WCLVF1V8D3"
        };

        // Initialize Firebase
        const app = initializeApp(firebaseConfig);
        const db = getDatabase();
        const auth = getAuth(app);

        let EmailInp = document.getElementById('emailInp');
        let PassInp = document.getElementById('passwordInp');
        let NameInp = document.getElementById('nameInp');
        let MainForm = document.getElementById('MainForm');

        let RegisterUser = evt => {
            evt.preventDefault();

            createUserWithEmailAndPassword(auth, EmailInp.value, PassInp.value)
                .then((userCredential) => {
                    // Signed up 
                    const user = userCredential.user;
                    console.log('Signed up:', user);
                    window.location.href = "homepage.html"; // Redirect to homepage
                })
                .catch((error) => {
                    const errorCode = error.code;
                    const errorMessage = error.message;
                    console.error('Error:', errorCode, errorMessage);
                });
        }


        MainForm.addEventListener('submit', RegisterUser);
    </script>
</body>

</html>